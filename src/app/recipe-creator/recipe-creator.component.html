<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Recipe</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
        integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body>
<nav class="navbar navbar-light bg-light">
  <a id="title" class="navbar-brand" href="/home">RecipeFinder</a>
  <span class="nav navbar-nav navbar-right">
         <a href="#"><b></b></a>
         </span>
</nav>
<h1>Add Recipe</h1>
<form name="CreateRipe" (ngSubmit)="f.form.valid && submitButtonPressed()" #f="ngForm" novalidate>

  <div class="">
    <div class="formfields">
      <label for="name">Title:</label>
      <input type="text" name="Name" [(ngModel)]="recipe.name" #name="ngModel" required/>
      <div *ngIf="f.submitted && !name.valid">Title is required</div>
      <br>
      <br>
      <label for="description">Description:</label>
      <input type="text" name="Name" [(ngModel)]="recipe.description" #description="ngModel" required/>
      <div *ngIf="f.submitted && !description.valid">Description is required</div>
      <br>
      <br>

      <label for="preparationTime">Preparation time in minutes:</label>
      <input type="number" name="Name" [(ngModel)]="recipe.preparationTime" #preparationTime="ngModel" required/>
      <div *ngIf="f.submitted && !preparationTime.valid">Preparation time is required</div>
      <br>
      <br>

      <label for="instructions">Instructions:</label>
      <input type="text" name="instructions" [(ngModel)]="recipe.instructions" #instructions="ngModel" required/>
      <div *ngIf="f.submitted && !instructions.valid">Instructions is required</div>
      <br>
      <label>Stappen:</label>
      <br>
      <br>
      <br>
      <br>
      <br>
      <br>
      <button type="button" (click)="addStep()">Stap toevoegen</button>
      <section *ngFor="let step of recipe.steps; let i = index;">
        <label>Stap {{step.number}}</label>
        <br>
        <br>
        <input type="text" [(ngModel)]="step.details" name="step_{{i}}"/>
      </section>
      <br>
      <br>
      <label>Servings:</label>
      <input type="number" name="Name" [(ngModel)]="recipe.servings" #servings="ngModel" required/>
      <div *ngIf="f.submitted && !servings.valid">Servings is required</div>
      <br>
      <br>
      <br>
      <br>
      <section *ngFor="let ingredient of ingredients; let i = index;">
        <button type="button" class="btn btn-danger btn-sm" (click)="removeIngredient(i)">Remove</button>
        <input placeholder="Ingredient" type="text" [(ngModel)]="ingredient.name" (keyup)="findIngredient(i)"
               list="ingredientName" name="ingredientName_{{i}}" required/>
        <input placeholder="Measurement" type="text" [(ngModel)]="recipe.ingredients[i].measurement"
               name="ingredientMeasurement_{{i}}" required/>
      </section>

      <button type="button" (click)="addIngredient()">Add Ingredient</button>
      <br>
      <br>
      <br>
      <h5>Upload een JPG of PNG afbeelding</h5>
      <button *ngIf="!showingPictures && recipe.pictures.length > 0" (click)="showPictures" class="btn btn-secondary">
        Toon afbeeldingen
      </button>
      <button *ngIf="showingPictures && recipe.pictures.length > 0" (click)="showPictures" class="btn btn-secondary">
        Verberg afbeeldingen
      </button>

      <section *ngFor="let picture of recipe.dummy; let i = index;">
        <input type="file" (change)="handleUpload0($event)"/>
        <br>

        <section *ngFor="let picture of recipe.pictures; let index = index;">
          <div class="col-6">
            <img *ngIf="showingPictures && i == index" id="picture-preview"
                 src="data:{{picture.type}};base64,{{picture.content}}" alt="Afbeelding" height="150px">
            <button *ngIf="i == index && picture.thumbnail == false" type="button" class="btn btn-danger btn-sm"
                    (click)="setThumbnail(i)">Thumbnail afbeelding
            </button>
            <button *ngIf="i == index && picture.thumbnail == true" type="button" class="btn btn-success btn-sm"
                    (click)="setThumbnail(i)">Thumbnail afbeelding
            </button>
            <button *ngIf="i == index" type="button" class="btn btn-danger btn-sm" (click)="removePicture(i)">Verwijder
              afbeelding
            </button>
          </div>
        </section>

      </section>
      <br>
      <br>
      <br>
      <button [disabled]="loading">Opslaan</button>


      <datalist id="ingredientName">
        <option *ngFor="let option of ingredientOptions" [value]="option.name">{{option.name}}</option>
      </datalist>


    </div>
  </div>
</form>
</body>
<style>
  @font-face {
    font-family: Pacifico;
    src: url('assets/font/Pacifico-Regular.ttf') format("truetype");
  }

  @font-face {
    font-family: Roboto;
    src: url('assets/font/Roboto-Regular.ttf') format("truetype");
  }

  * {
    font-family: Roboto;
  }

  html,
  body {
    /*background-image: url('assets/image/background.jpg');*/
    height: 100vh;
  }

  .container_recipevalues {
    background-color: white;
  }

  #title, h1, h3, h5 {
    font-family: Pacifico;
  }

  input {
    box-sizing: border-box
  }

  .formfields {
    width: 100%;
    margin: 8px 0;
    padding: 16px 20px;
    border-radius: 5px;
    border: 0px solid gray;
  }

  label {
    float: left;
  }

  input {
    float: right;
    width: 100%;
  }

  .container_recipevalues {
    margin-top: 5px;
    border-radius: 5px;
    border: 1px solid lightgray;
    width: 80%;
    margin: auto;
  }

  .cont {
    position: relative;
    width: 1140px;
  }

  .top-text-block {
    padding: 10px;
    position: absolute;
    top: 0px;
    right: 0px;
    background-color: rgba(255, 255, 255, 0.7);
    color: inherit;
    padding-left: 20px;
    padding-right: 20px;
  }

  .bottom-text-block {
    padding: 10px;
    position: absolute;
    bottom: 10px;
    left: 0px;
    background-color: rgba(255, 255, 255, 0.7);
    color: inherit;
    padding-left: 20px;
    padding-right: 20px;
    width: 100%;
  }

  .navbar {
    box-shadow: 0 4px 2px -2px rgba(0, 0, 0, .2);
  }

  a {
    color: inherit;
  }

  h1 {
    text-align: center;
    padding-top: 10px;
    padding-bottom: 10px;
  }

  h3 {
    text-align: center;
    padding-top: 10px;
    padding-bottom: 10px;
  }

  h5 {
    padding-top: 10px;
    padding-bottom: 10px;
  }

  img {
    margin-bottom: 10px;;
  }

  ul {
    list-style-type: none;
    padding: 0px;
  }

  li {
    padding-top: 5px;
    padding-bottom: 5px;
  }
</style>
</html>
